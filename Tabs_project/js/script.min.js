"use strict";window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("body");let t=[];!function e(o){o.childNodes.forEach(o=>{o.nodeName.match(/^H\d/)?t.push({header:o.nodeName,content:o.textContent}):e(o)})}(e),console.log(t);const o=document.querySelectorAll(".tabheader__item"),s=document.querySelectorAll(".tabcontent"),n=document.querySelector(".tabheader__items");function c(){s.forEach(e=>{e.classList.add("hide"),e.classList.remove("show","fade")}),o.forEach(e=>{e.classList.remove("tabheader__item_active")})}function a(e=0){s[e].classList.add("show","fade"),s[e].classList.remove("hide"),o[e].classList.add("tabheader__item_active")}c(),a(),n.addEventListener("click",e=>{const t=e.target;t&&t.classList.contains("tabheader__item")&&o.forEach((e,o)=>{t==e&&(c(),a(o))})});!function(e,t){const o=new Date(t),s=document.querySelector(e),n=("0"+o.getDate()).slice(-2),c={0:"января",1:"февраля",2:"марта",3:"апреля",4:"мая",5:"июня",6:"июля",7:"августа",8:"сентября",9:"октября",10:"ноября",11:"декабря"}[o.getMonth()],a=document.createTextNode((o-new Date>0?"Акция закончится ":"Акция закончилась ")+`${n} ${c} в 00: 00`);s.lastChild.remove(),s.append(a)}(".promotion__descr","2021-08-06"),function(e,t){const o=document.querySelector(e),s=o.querySelector("#days"),n=o.querySelector("#hours"),c=o.querySelector("#minutes"),a=o.querySelector("#seconds"),d=setInterval(r,1e3);function r(){const e=function(e){const t=Date.parse(e)-Date.parse(new Date);return t>0?{total:t,days:Math.floor(t/864e5),hours:Math.floor(t/36e5%24),minutes:Math.floor(t/1e3/60%60),seconds:Math.floor(t/1e3%60)}:{total:t,days:0,hours:0,minutes:0,seconds:0}}(t);s.innerHTML=("0"+e.days).slice(-2),n.innerHTML=("0"+e.hours).slice(-2),c.innerHTML=("0"+e.minutes).slice(-2),a.innerHTML=("0"+e.seconds).slice(-2),e.total<=0&&clearInterval(d)}r()}(".timer","2021-08-06");const d=document.querySelectorAll("[data-modal]"),r=document.querySelector(".modal"),i=()=>{r.classList.add("show"),r.classList.remove("hide"),document.body.style.overflow="hidden",clearTimeout(m)},l=()=>{r.classList.remove("show"),r.classList.add("hide"),document.body.style.overflow=""},u=()=>{window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(i(),window.removeEventListener("scroll",u))};d.forEach(e=>{e.addEventListener("click",i)}),r.addEventListener("click",e=>{e.target!==r&&""!=e.target.getAttribute("data-close")||l()}),document.addEventListener("keydown",e=>{"Escape"===e.code&&r.classList.contains("show")&&l()});const m=setTimeout(i,5e4);window.addEventListener("scroll",u)});