"use strict";window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".tabheader__item"),t=document.querySelectorAll(".tabcontent"),s=document.querySelector(".tabheader__items");function n(){t.forEach(e=>{e.classList.add("hide"),e.classList.remove("show","fade")}),e.forEach(e=>{e.classList.remove("tabheader__item_active")})}function o(s=0){t[s].classList.add("show","fade"),t[s].classList.remove("hide"),e[s].classList.add("tabheader__item_active")}n(),o(),s.addEventListener("click",t=>{const s=t.target;s&&s.classList.contains("tabheader__item")&&e.forEach((e,t)=>{s==e&&(n(),o(t))})});!function(e,t){const s=new Date(t),n=document.querySelector(e),o=("0"+s.getDate()).slice(-2),i={0:"января",1:"февраля",2:"марта",3:"апреля",4:"мая",5:"июня",6:"июля",7:"августа",8:"сентября",9:"октября",10:"ноября",11:"декабря"}[s.getMonth()],a=document.createTextNode((s-new Date>0?"Акция закончится ":"Акция закончилась ")+`${o} ${i} в 00: 00`);n.lastChild.remove(),n.append(a)}(".promotion__descr","2021-08-06"),function(e,t){const s=document.querySelector(e),n=s.querySelector("#days"),o=s.querySelector("#hours"),i=s.querySelector("#minutes"),a=s.querySelector("#seconds"),c=setInterval(d,1e3);function d(){const e=function(e){const t=Date.parse(e)-Date.parse(new Date);return t>0?{total:t,days:Math.floor(t/864e5),hours:Math.floor(t/36e5%24),minutes:Math.floor(t/1e3/60%60),seconds:Math.floor(t/1e3%60)}:{total:t,days:0,hours:0,minutes:0,seconds:0}}(t);n.innerHTML=("0"+e.days).slice(-2),o.innerHTML=("0"+e.hours).slice(-2),i.innerHTML=("0"+e.minutes).slice(-2),a.innerHTML=("0"+e.seconds).slice(-2),e.total<=0&&clearInterval(c)}d()}(".timer","2021-08-06");const i=document.querySelectorAll("[data-modal]"),a=document.querySelector(".modal"),c=(e,t)=>{e.classList.toggle(t)},d=()=>{c(a,"show"),document.body.style.overflow="hidden",clearTimeout(modalTimeoutId)},r=()=>{c(a,"show"),document.body.style.overflow=""},l=()=>{window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(d(),window.removeEventListener("scroll",l))};i.forEach(e=>{e.addEventListener("click",()=>{d()})}),a.addEventListener("click",e=>{e.target!==a&&""!=e.target.getAttribute("data-close")||r()}),document.addEventListener("keydown",e=>{"Escape"===e.code&&a.classList.contains("show")&&r()}),window.addEventListener("scroll",l);class m{constructor(e,t,s,n,o,i,...a){this.src=e,this.alt=t,this.subtitle=s,this.descr=n,this.price=o,this.classes=a,this.parent=document.querySelector(i),this.transfer=27,this.changeToUAH()}changeToUAH(){this.price*=this.transfer}render(){const e=document.createElement("div");this.classes.length?this.classes.forEach(t=>e.classList.add(t)):(this.element="menu__item",e.classList.add(this.element)),e.innerHTML=`\n\t\t\t\t<img src=${this.src} alt=${this.alt}>\n\t\t\t\t<h3 class="menu__item-subtitle">${this.subtitle}</h3>\n\t\t\t\t<div class="menu__item-descr">${this.descr}</div>\n\t\t\t\t<div class="menu__item-divider"></div>\n\t\t\t\t<div class="menu__item-price">\n\t\t\t\t\t<div class="menu__item-cost">Цена:</div>\n\t\t\t\t\t<div class="menu__item-total"><span>${this.price}</span> грн/день</div>\n\t\t\t\t</div>\n\t \t\t   `,this.parent.append(e)}}new m("img/tabs/vegy.jpg","vegy",'Меню "Фитнес"','Меню "Фитнес" - это новый подход к приготовлению блюд: больше свежих\nовощей и фруктов. Продукт активных и здоровых людей. Это абсолютно новый продукт с оптимальной\nценой и высоким качеством!',9,".menu .container").render(),new m("img/tabs/elite.jpg","elite","Меню “Премиум”","В меню  “Премиум”  мы  используем  не  только  красивый  дизайн упаковки, но\n\t\tи качественное исполнение блюд. Красная рыба, морепродукты, фрукты и свежайшие овощи - ресторанное меню без похода\n\t\tв ресторан!",14,".menu .container","menu__item").render(),new m("img/tabs/post.jpg","post",'Меню "Постное"',"Меню “Постное” - это тщательный подбор ингредиентов: полное отсутствие\n\t\tпродуктов животного происхождения, молоко из миндаля, овса, кокоса или гречки, правильное\n\t\tколичество белков за счет тофу и импортных вегетарианских стейков.",21,".menu .container","menu__item").render();const u=document.querySelectorAll("form"),h={loading:"Загрузка",success:"Спасибо! Скоро мы с вами свяжемся",failure:"Что-то пошло не так....."};function v(e){const t=document.querySelector(".modal__dialog");t.classList.add("hide"),d();const s=document.createElement("div");s.classList.add(".modal__dialog"),s.innerHTML=`\n\t\t<div class="modal__content">\n\t\t\t<div data-close class="modal__close">&times;</div>\n\t\t\t<div class="modal__title">${e}</div>\n\t\t</div>\n\t\t`,document.querySelector(".modal").append(s),setTimeout(()=>{s.remove(),t.classList.add("show"),t.classList.remove("hide"),r()},4e3)}u.forEach(e=>{var t;(t=e).addEventListener("submit",e=>{e.preventDefault();const s=document.createElement("div");s.classList.add("status"),s.textContent=h.loading,t.append(s);const n=new XMLHttpRequest;n.open("POST","server.php"),n.setRequestHeader("Content-type","application/json");const o=new FormData(t),i={};o.forEach((e,t)=>{i[t]=e});const a=JSON.stringify(i);n.send(a),n.addEventListener("load",()=>{200===n.status?(console.log(n.response),v(h.success),t.reset(),s.remove()):v(h.failure)})})})});